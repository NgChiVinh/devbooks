<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">

    <title th:text="${book.id == null} ? 'Thêm Sách Mới' : 'Sửa thông tin Sách'">Form Sách</title>

    <style>
        body { font-family: sans-serif; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; }
        input, select, textarea { width: 300px; padding: 8px; }
        button { padding: 10px 15px; }
        .current-image { max-width: 200px; height: auto; margin-top: 10px; border: 1px solid #ccc; }
    </style>
</head>
<body>

<h1 th:text="${book.id == null} ? 'Thêm Sách Mới' : 'Sửa thông tin Sách'">Form Sách</h1>

<form th:action="${book.id == null} ? @{/admin/books/add} : @{/admin/books/edit/{id}(id=${book.id})}"
      th:object="${book}"
      method="post"
      enctype="multipart/form-data">

    <div class="form-group">
        <label for="title">Tiêu đề:</label>
        <input type="text" id="title" th:field="*{title}" required>
    </div>

    <div class="form-group">
        <label for="author">Tác giả:</label>
        <input type="text" id="author" th:field="*{author}" required>
    </div>

    <div class="form-group">
        <label for="price">Giá:</label>
        <input type="number" id="price" th:field="*{price}" required step="0.01">
    </div>

    <div class="form-group">
        <label for="stockQuantity">Số lượng trong kho:</label>
        <input type="number" id="stockQuantity" th:field="*{stockQuantity}" required>
    </div>

    <div class="form-group">
        <label for="category">Danh mục:</label>
        <select id="category" th:field="*{category}" required>
            <option value="">-- Chọn Danh mục --</option>
            <option th:each="cat : ${categories}"
                    th:value="${cat.id}"
                    th:text="${cat.name}"></option>
        </select>
    </div>

    <div class="form-group">
        <label for="coverImageFile">Ảnh bìa mới:</label>
        <input type="file" id="coverImageFile" name="coverImageFile" accept="image/*">
        <small th:if="${book.id != null}">Bỏ trống nếu không muốn thay đổi ảnh hiện tại.</small>
    </div>

    <div class="form-group" th:if="${book.id != null && book.coverImageUrl != null}">
        <label>Ảnh bìa hiện tại:</label>
        <img th:src="${book.coverImageUrl}" alt="Ảnh bìa" class="current-image"/>
    </div>

    <div class="form-group">
        <label for="description">Mô tả:</label>
        <textarea id="description" th:field="*{description}" rows="5"></textarea>
    </div>

    <button type="submit" th:text="${book.id == null} ? 'Lưu Sách' : 'Cập nhật'">Lưu</button>
    <a href="/admin/books">Hủy</a>
</form>

</body>
</html>