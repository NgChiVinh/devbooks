<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Dashboard - Qu·∫£n tr·ªã</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
          display: flex;
          font-family: 'Segoe UI', sans-serif;
          background-color: #f4f6f9;
        }

        /* Sidebar */
        .sidebar {
          width: 230px;
          background-color: #2c3e50;
          color: white;
          height: 100vh;
          padding-top: 30px;
          position: fixed;
        }

        .sidebar h2 {
          text-align: center;
          margin-bottom: 30px;
          font-weight: bold;
          font-size: 20px;
        }

        .sidebar a {
          display: block;
          color: #ecf0f1;
          padding: 12px 20px;
          text-decoration: none;
          transition: background 0.3s;
        }

        .sidebar a:hover,
        .sidebar a.active {
          background-color: #34495e;
          font-weight: 600;
        }

        /* Main Content */
        .main-content {
          margin-left: 230px;
          padding: 30px;
          flex: 1;
        }

        .card {
          background: white;
          border: none;
          border-radius: 8px;
          box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
          padding: 20px;
        }

        table {
          background: white;
          border-radius: 8px;
          width: 100%;
          margin-top: 20px;
        }

        th, td {
          padding: 12px;
          text-align: left;
        }

        th {
          background: #2c3e50;
          color: white;
        }
    </style>
</head>
<body>

<!-- Sidebar -->
<div class="sidebar">
    <h2>Admin Panel</h2>
    <a href="/admin/dashboard" class="active">üìä T·ªïng quan</a>
    <a href="/admin/books">üìö Qu·∫£n l√Ω S√°ch</a>
    <a href="/admin/categories">üóÇ Danh m·ª•c</a>
    <a href="/admin/users">üë§ Ng∆∞·ªùi d√πng</a>
    <a href="/admin/orders">üßæ ƒê∆°n h√†ng</a>
</div>

<!-- Main content -->
<div class="main-content">
    <h2 class="mb-4">T·ªïng quan th·ªëng k√™</h2>

    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card">
                <h5>T·ªïng doanh thu</h5>
                <h3 th:text="${#numbers.formatDecimal(totalRevenue, 0, 'COMMA', 0, 'POINT')} + ' VNƒê'">0 VNƒê</h3>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <h5>T·ªïng s·ªë ƒë∆°n h√†ng</h5>
                <h3 th:text="${totalOrders}">0</h3>
            </div>
        </div>
    </div>

    <div class="card mb-4">
        <h5>Bi·ªÉu ƒë·ªì Doanh thu theo th√°ng</h5>
        <canvas id="revenueChart" height="100"></canvas>
    </div>

    <div class="card">
        <h5>Top 5 S√°ch B√°n Ch·∫°y</h5>
        <table class="table table-striped">
            <thead>
            <tr>
                <th>ID S√°ch</th>
                <th>T√™n S√°ch</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="book : ${topSellingBooks}">
                <td th:text="${book.id}">1</td>
                <td th:text="${book.title}">T√™n s√°ch</td>
            </tr>
            </tbody>
        </table>
        <div th:if="${topSellingBooks == null OR topSellingBooks.isEmpty()}">
            <p class="text-muted">Ch∆∞a c√≥ d·ªØ li·ªáu s√°ch b√°n ch·∫°y.</p>
        </div>
    </div>
</div>

<script>
    const ctx = document.getElementById('revenueChart');
    new Chart(ctx, {
      type: 'line',
      data: {
        labels: ['Th√°ng 1', 'Th√°ng 2', 'Th√°ng 3', 'Th√°ng 4', 'Th√°ng 5'],
        datasets: [{
          label: 'Doanh thu (VNƒê)',
          data: [12000000, 18000000, 15000000, 20000000, 25000000],
          borderWidth: 3,
          borderColor: '#2c3e50',
          tension: 0.3,
          fill: true,
          backgroundColor: 'rgba(44, 62, 80, 0.1)'
        }]
      },
      options: {
        responsive: true,
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });
</script>

</body>
</html>
